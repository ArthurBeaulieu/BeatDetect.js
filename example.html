<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
  <meta content="ie=edge" http-equiv="x-ua-compatible">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="initial-scale=1" name="viewport">
  <meta name="description" content="Beat detector for audio files. KISS, light and library free. ">
  <title>BeatDetect.js 0.0.1 - Demo</title>
  <link rel="stylesheet" href="./demo/css/style.css">
</head>
<body>
	<a href="https://github.com/ArthurBeaulieu/BeatDetect.js" target="_blank" style="position: absolute; right: 0; top: 0;"><img width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149" alt="Fork me on GitHub"></a>
  <h1>BeatDetect.js – Version 0.0.1</h1>
  <hr>
  <h3>Analyze demo file (Teminite – Hot Fizz)</h3>
  <button id="demo-file">Start Analysis</button>
	<p id="output-text">Result will be displayed here...</p>
  <h3>Analyse local tracks</h3>
  <label for="file-input" class="file-input">Select tracks</label>
  <input id="file-input" type="file" multiple>
  <p id="output-text">Select one or several audio files</p>
  <hr>
  <p>
    <a href="https://github.com/ArthurBeaulieu/BeatDetect.js/releases" title="Releases" target="_blank" rel="noreferrer noopener"><img src="https://badgen.net/badge/version/0.0.1/blue" alt="version-badge"></a>
    <a href="https://github.com/ArthurBeaulieu/BeatDetect.js/blob/master/LICENSE" title="License" target="_blank" rel="noreferrer noopener"><img src="https://img.shields.io/github/license/ArthurBeaulieu/BeatDetect.js.svg" alt="license-badge"></a>
    <a href="doc/index.html" title="Documentation" target="_blank" rel="noreferrer noopener"><img src="https://badgen.net/badge/documentation/written/green" alt="documentation-badge"></a>
    <img src="https://badgen.net/badge/test/passed/green" alt="test-badge" title="Run npm run test">
    <img src="https://badgen.net/badge/dependencies/none/green" alt="dependencies-badge" title="Check package.json file">
  </p>
  <p style="font-size: .9rem; font-style: italic; margin: 0;">Arthur Beaulieu – October 2020</p>
	<script type="module">
		import BeatDetect from './src/BeatDetect.js';
    import AnalysisModal from './demo/js/AnalysisModal.js';
    // Instanciation of BeatDetect with all its provided options
		const bt = new BeatDetect({
			sampleRate: 44100,
			log: true, // Debug BeatDetect execution with logs
			perf: false, // Attach elapsed time to result object
      round: false, // True to have an integer result
      float: 4, // If round is false, give the amount of number after comma you want in range [1, infinite]
      lowPassFreq: 150, // Low pass filter cut frequency
      highPassFreq: 100 // High pass filter cut frequency
		});
    // Beat detection using demo file
    const demoButton = document.getElementById('demo-file');
    const outputText = document.getElementById('output-text');
    demoButton.addEventListener('click', () => {
      outputText.innerHTML = 'Analysis in progress...'
      bt.getBeatInfo({
        url: './demo/audio/Teminite - Hot Fizz.mp3',
        name: 'Teminite - Hot Fizz' // Optional argument
      }).then(info => {
        outputText.innerHTML = `<b>Beatport</b> : 105 BPM – <b>BeatDetect</b> : ${info.bpm}`;
      }).catch(error => {
        console.error(error);
      });
    });
    // User local files
    const fileInput = document.getElementById('file-input');
    fileInput.addEventListener('change', () => {
      const modal = new AnalysisModal({
        url: './demo/html/analysisModal.html',
        data: fileInput.files,
        bt: bt
      });
    });
	</script>
</body>
</html>
